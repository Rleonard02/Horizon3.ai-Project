version: '3'
services:
  codeql:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: codeql_container
    volumes:
      - ../source_code:/source_code  # Mount source code folder into container
      - ./reports:/reports           # Mount reports folder into container
    command: bash -c "codeql database create /reports/codeql_db --language=python --source-root=/source_code && \
                      codeql database analyze /reports/codeql_db --format=sarif-latest --output=/reports/codeql_output.sarif"
